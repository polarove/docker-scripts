import{e as L,aa as F,a4 as N,r as v,ag as h,aL as S,ae as D,q,v as r,z as o,aM as C,a5 as f,ai as x,p as R,t as n,aN as z,ah as K,Z as M,x as a,aO as T,a7 as $,a8 as O,a9 as W}from"./index-69a426b7.js";import{a as Z,E as j}from"./el-form-item-f99dedd3.js";import{E as A}from"./el-divider-1e109ec3.js";import{E as G}from"./el-button-26725033.js";import{E as H}from"./el-input-5783c248.js";import"./use-form-common-props-152c363a.js";import"./castArray-1ae6a672.js";import"./error-78e43d3e.js";import"./_Uint8Array-950cea96.js";import"./use-form-item-c6c077b7.js";const p=u=>($("data-v-ffb60dfe"),u=u(),O(),u),J=p(()=>a("div",{class:"i-ant-design:mail-outlined"},null,-1)),P=p(()=>a("div",{class:"i-ep:lock"},null,-1)),Q=p(()=>a("span",{class:"i-ep:info-filled mr-5px"},null,-1)),X=p(()=>a("span",{class:"select-none"},"我忘记了密码",-1)),Y=[Q,X],ee=p(()=>a("div",{class:"text-center"},[a("span",{class:"opacity-60 text-size-[0.77em]"}," 您所填写的邮箱与密码与 Warframe / Digital Extremes "),a("span",{class:"opacity-80 text-size-[0.77em]"}," 没有任何关联，仅用作网站登录 ")],-1)),se=L({__name:"index",setup(u){const c=F(),y=N(),t=v(!1),m=v(),w=y.query.redirect,E=h({email:[{required:!0,message:"请输入邮箱",trigger:"change"},{type:"email",message:"请检查邮箱格式",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"change"}]}),i=h({email:"",password:""}),g=s=>{t.value=!0,s&&s.validate(async e=>{if(e){const l=await T(i);l.success?(f.push({name:"origin"}),c.setUser(l.data)):x.error({position:"bottom-right",message:l.message}),t.value=!1}else return t.value=!1,!1})},U=()=>{f.push({name:"recover"})},V=async s=>{const e=await C(s);e.success?(f.push({name:"origin"}),c.setUser(e.data),t.value=!1):(x.error({position:"bottom-right",message:e.message}),t.value=!1)},B=s=>{t.value=!0,setTimeout(()=>{V(s)},2e3)};return S(()=>{let s=c.getUUID();D(s)&&w!==void 0&&B(s)}),(s,e)=>{const l=H,_=j,I=G,b=A,k=Z;return R(),q(k,{ref_key:"LoginFormRef",ref:m,rules:o(E),model:o(i)},{default:r(()=>[n(_,{prop:"email"},{default:r(()=>[n(l,{placeholder:"请输入邮箱",modelValue:o(i).email,"onUpdate:modelValue":e[0]||(e[0]=d=>o(i).email=d)},{prepend:r(()=>[J]),_:1},8,["modelValue"])]),_:1}),n(_,{prop:"password"},{default:r(()=>[n(l,{"show-password":"",placeholder:"请输入密码",onKeyup:e[1]||(e[1]=z(d=>g(o(m)),["enter"])),modelValue:o(i).password,"onUpdate:modelValue":e[2]||(e[2]=d=>o(i).password=d)},{prepend:r(()=>[P]),_:1},8,["modelValue"])]),_:1}),n(_,null,{default:r(()=>[n(I,{onClick:e[3]||(e[3]=d=>g(o(m))),loading:o(t)},{default:r(()=>[K(M(o(t)?"登录中":"登录 / 注册"),1)]),_:1},8,["loading"]),a("div",{class:"tip",onClick:U},Y)]),_:1}),n(b),ee]),_:1},8,["rules","model"])}}});const ce=W(se,[["__scopeId","data-v-ffb60dfe"]]);export{ce as default};
