import{b as I,by as V,d as U,bb as _,h as $,r as c,c4 as Z,cc as q,l as g,b0 as G,w as B,n as j,o as H,bu as J,cd as D,i as K}from"./index-69a426b7.js";import{U as P}from"./use-form-item-c6c077b7.js";import{u as x}from"./use-form-common-props-152c363a.js";import{a as Q}from"./index-d15b5e51.js";const W=I({center:Boolean,alignCenter:Boolean,closeIcon:{type:V},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),le={close:()=>!0},te=I({...W,appendToBody:Boolean,beforeClose:{type:U(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),ne={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[P]:e=>_(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ae=(e,a)=>{const l=J().emit,{nextZIndex:m}=$();let C="";const h=x(),F=x(),t=c(!1),r=c(!1),i=c(!1),d=c(e.zIndex||m());let s,u;const O=Z("namespace",q),S=g(()=>{const o={},n=`--${O.value}-dialog`;return e.fullscreen||(e.top&&(o[`${n}-margin-top`]=e.top),e.width&&(o[`${n}-width`]=G(e.width))),o}),T=g(()=>e.alignCenter?{display:"flex"}:{});function E(){l("opened")}function A(){l("closed"),l(P,!1),e.destroyOnClose&&(i.value=!1)}function k(){l("close")}function b(){u==null||u(),s==null||s(),e.openDelay&&e.openDelay>0?{stop:s}=D(()=>p(),e.openDelay):p()}function f(){s==null||s(),u==null||u(),e.closeDelay&&e.closeDelay>0?{stop:u}=D(()=>v(),e.closeDelay):v()}function y(){function o(n){n||(r.value=!0,t.value=!1)}e.beforeClose?e.beforeClose(o):f()}function w(){e.closeOnClickModal&&y()}function p(){K&&(t.value=!0)}function v(){t.value=!1}function L(){l("openAutoFocus")}function N(){l("closeAutoFocus")}function M(o){var n;((n=o.detail)==null?void 0:n.focusReason)==="pointer"&&o.preventDefault()}e.lockScroll&&Q(t);function z(){e.closeOnPressEscape&&y()}return B(()=>e.modelValue,o=>{o?(r.value=!1,b(),i.value=!0,d.value=e.zIndex?d.value++:m(),j(()=>{l("open"),a.value&&(a.value.scrollTop=0)})):t.value&&f()}),B(()=>e.fullscreen,o=>{a.value&&(o?(C=a.value.style.transform,a.value.style.transform=""):a.value.style.transform=C)}),H(()=>{e.modelValue&&(t.value=!0,i.value=!0,b())}),{afterEnter:E,afterLeave:A,beforeLeave:k,handleClose:y,onModalClick:w,close:f,doClose:v,onOpenAutoFocus:L,onCloseAutoFocus:N,onCloseRequested:z,onFocusoutPrevented:M,titleId:h,bodyId:F,closed:r,style:S,overlayDialogStyle:T,rendered:i,visible:t,zIndex:d}};export{le as a,te as b,ne as c,W as d,ae as u};
