import{i as d,cg as v,ab as w,g as T,ch as C,ci as p,w as b,cj as M,ck as N,cl as A,cm as m,b as L,d as E,e as O,t as R,R as y,cn as _}from"./index-69a426b7.js";import{t as k}from"./error-78e43d3e.js";const x=(e,t)=>{if(!d)return!1;const o={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],n=v(e,o);return["scroll","auto","overlay"].some(s=>n.includes(s))},z=(e,t)=>{if(!d)return;let o=e;for(;o;){if([window,document,document.documentElement].includes(o))return window;if(x(o,t))return o;o=o.parentNode}return o};let c;const Y=e=>{var t;if(!d)return 0;if(c!==void 0)return c;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const n=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const l=s.offsetWidth;return(t=o.parentNode)==null||t.removeChild(o),c=n-l,c};function K(e,t){if(!d)return;if(!t){e.scrollTop=0;return}const o=[];let n=t.offsetParent;for(;n!==null&&e!==n&&e.contains(n);)o.push(n),n=n.offsetParent;const s=t.offsetTop+o.reduce((u,a)=>u+a.offsetTop,0),l=s+t.offsetHeight,r=e.scrollTop,i=r+e.clientHeight;s<r?e.scrollTop=s:l>i&&(e.scrollTop=l-e.clientHeight)}var f=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(f||{});const U=(e,t={})=>{w(e)||k("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||T("popup"),n=C(()=>o.bm("parent","hidden"));if(!d||p(document.body,n.value))return;let s=0,l=!1,r="0";const i=()=>{setTimeout(()=>{A(document==null?void 0:document.body,n.value),l&&document&&(document.body.style.width=r)},200)};b(e,u=>{if(!u){i();return}l=!p(document.body,n.value),l&&(r=document.body.style.width),s=Y(o.namespace.value);const a=document.documentElement.clientHeight<document.body.scrollHeight,S=v(document.body,"overflowY");s>0&&(a||S==="scroll")&&l&&(document.body.style.width=`calc(100% - ${s}px)`),M(document.body,n.value)}),N(()=>i())},D=e=>{if(!e)return{onClick:m,onMousedown:m,onMouseup:m};let t=!1,o=!1;return{onClick:r=>{t&&o&&e(r),t=o=!1},onMousedown:r=>{t=r.target===r.currentTarget},onMouseup:r=>{o=r.target===r.currentTarget}}},H=L({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:E([String,Array,Object])},zIndex:{type:E([String,Number])}}),I={click:e=>e instanceof MouseEvent},B="overlay";var h=O({name:"ElOverlay",props:H,emits:I,setup(e,{slots:t,emit:o}){const n=T(B),s=u=>{o("click",u)},{onClick:l,onMousedown:r,onMouseup:i}=D(e.customMaskEvent?void 0:s);return()=>e.mask?R("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:r,onMouseup:i},[y(t,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):_("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[y(t,"default")])}});const V=h;export{V as E,U as a,z as g,K as s,D as u};
